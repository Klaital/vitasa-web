<% provide(:title, 'User Profile') %>
<div class="row">
  <aside class="col-md-4">
    <section class="user_info">
      <h1>User Profile</h1>
      <p>Name: <%= @user.name %></p>
      <p>Email: <%= @user.email %></p>
      <p>Phone: <%= @user.phone %></p>
      <p>Certification Level: <%= @user.certification %> </p>
      <p>Roles: <%= @user.roles.collect {|r| r.name }.join(', ') %></p>
    </section>
  </aside>
</div>

<div class="signups">
  <h2>Site Signups</h2>
  <table>
    <tr>
      <th>Site</th>
      <th>Date</th>
    </tr>
    <% @work_intents.each do |signup| %>
      <tr>
        <td><%= link_to signup.shift.calendar.site.name, site_path(signup.shift.calendar.site.slug) %></td>
        <td><%= signup.shift.calendar.date %></td>
      </tr>
    <% end %>
  </table>

  <h2>Work History</h2>
  <table>
      <tr>
        <th>Site</th>
        <th>Date</th>
        <th>Hours Worked</th>
        <th>Approved</th>
      </tr>
      <% @work_history.each do |work_record| %>
        <tr>
          <td><%= link_to work_record.shift.calendar.site.name, site_path(work_record.shift.calendar.site.slug) %></td>
          <td><%= work_record.shift.calendardate %></td>
          <td><%= work_record.hours %></td>
          <td><%= work_record.approved %></td>
        </tr>
      <% end %>
  </table>

  <h2>Suggestions Submitted</h2>
  <table>
    <tr>
      <th>Subject</th>
      <th>Text</th>
      <th>From Public?</th>
      <th>Status</th>
    </tr>
    <% @suggestions.each do |suggestion| %>
      <tr>
        <td><%= link_to suggestion.subject, suggestion_path(suggestion) %></td>
        <td><%= suggestion.details %></td>
        <td><%= suggestion.from_public %></td>
        <td><%= suggestion.status %></td>
      </tr>
    <% end %>
  </table>
</div>
