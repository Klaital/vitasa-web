<% provide(:title, 'User Profile') %>
<div class="row">
  <aside class="col-md-4">
    <section class="user_info">
      <h1>User Profile</h1>
      <p>Name: <%= @user.name %></p>
      <p>Email: <%= @user.email %></p>
      <p>Phone: <%= @user.phone %></p>
      <p>Certification Level: <%= @user.certification %> </p>
      <p>Roles: <%= @user.roles.collect {|r| r.name }.join(', ') %></p>
    </section>
  </aside>
</div>

<div class="signups">
  <h2>Site Work Log</h2>
  <table>
    <tr>
      <th>Site</th>
      <th>Date</th>
      <th>Hours</th>
      <th>Approved</th>
    </tr>
    <% @user.work_logs.find_each do |work_log| %>
      <tr>
        <td><%= link_to work_log.site.name, site_path(work_log.site.slug) %></td>
        <td><%= work_log.date %></td>
        <td><%= work_log.hours %></td>
        <td><%= work_log.approved %></td>
      </tr>
    <% end %>
  </table>

  <h2>Suggestions Submitted</h2>
  <table>
    <tr>
      <th>Subject</th>
      <th>Text</th>
      <th>From Public?</th>
      <th>Status</th>
    </tr>
    <% @user.suggestions.each do |suggestion| %>
      <tr>
        <td><%= link_to suggestion.subject, suggestion_path(suggestion) %></td>
        <td><%= suggestion.details %></td>
        <td><%= suggestion.from_public %></td>
        <td><%= suggestion.status %></td>
      </tr>
    <% end %>
  </table>
</div>
